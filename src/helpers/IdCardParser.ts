import {parse as parseMrz} from 'mrz';

export interface AWSTextDetection {
    DetectedText: string;
    Type: 'LINE' | 'WORD';
    Id: number;
    ParentId?: number;
    Confidence: number;
    Geometry: {
        BoundingBox: {
            Width: number;
            Height: number;
            Left: number;
            Top: number;
        },
        Polygon: {X: number, Y: number}[];
    }
}


const response: AWSTextDetection[] = [
    {
        "Confidence": 86.63097381591797,
        "DetectedText": "RANDYS YS NAD LABEM-STARA BOLESLAV, BRANDYS NAD LABEM",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.03234495222568512,
                "Left": 0.1475863754749298,
                "Top": 0.023359104990959167,
                "Width": 0.758224606513977
            },
            "Polygon": [
                {
                    "X": 0.1475863754749298,
                    "Y": 0.023359104990959167
                },
                {
                    "X": 0.9058110117912292,
                    "Y": 0.03799500688910484
                },
                {
                    "X": 0.9047022461891174,
                    "Y": 0.07033996284008026
                },
                {
                    "X": 0.1464775949716568,
                    "Y": 0.05570405721664429
                }
            ]
        },
        "Id": 0,
        "Type": "LINE"
    },
    {
        "Confidence": 86.48603057861328,
        "DetectedText": "VODOJEMU .2517",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.023640774190425873,
                "Left": 0.1559375524520874,
                "Top": 0.05071815103292465,
                "Width": 0.30008673667907715
            },
            "Polygon": [
                {
                    "X": 0.1559375524520874,
                    "Y": 0.05071815103292465
                },
                {
                    "X": 0.45602428913116455,
                    "Y": 0.05431359261274338
                },
                {
                    "X": 0.45552128553390503,
                    "Y": 0.07795436680316925
                },
                {
                    "X": 0.1554345339536667,
                    "Y": 0.07435892522335052
                }
            ]
        },
        "Id": 1,
        "Type": "LINE"
    },
    {
        "Confidence": 87.34105682373047,
        "DetectedText": "HA-VYCHOD",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.0220163743942976,
                "Left": 0.25369346141815186,
                "Top": 0.07273821532726288,
                "Width": 0.16088955104351044
            },
            "Polygon": [
                {
                    "X": 0.25369346141815186,
                    "Y": 0.07273821532726288
                },
                {
                    "X": 0.4145830273628235,
                    "Y": 0.07479935884475708
                },
                {
                    "X": 0.4140821397304535,
                    "Y": 0.09681573510169983
                },
                {
                    "X": 0.25319257378578186,
                    "Y": 0.09475458413362503
                }
            ]
        },
        "Id": 2,
        "Type": "LINE"
    },
    {
        "Confidence": 73.88701629638672,
        "DetectedText": "LL0ERSONAL",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.021024074405431747,
                "Left": 0.17710059881210327,
                "Top": 0.10256942361593246,
                "Width": 0.1440468430519104
            },
            "Polygon": [
                {
                    "X": 0.17710059881210327,
                    "Y": 0.10256942361593246
                },
                {
                    "X": 0.32114744186401367,
                    "Y": 0.103289894759655
                },
                {
                    "X": 0.3209607005119324,
                    "Y": 0.12431397289037704
                },
                {
                    "X": 0.17691385746002197,
                    "Y": 0.12359349429607391
                }
            ]
        },
        "Id": 3,
        "Type": "LINE"
    },
    {
        "Confidence": 83.61105346679688,
        "DetectedText": "RODININY",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.018189243972301483,
                "Left": 0.3103881776332855,
                "Top": 0.14058561623096466,
                "Width": 0.06816744059324265
            },
            "Polygon": [
                {
                    "X": 0.3103881776332855,
                    "Y": 0.14058561623096466
                },
                {
                    "X": 0.37855562567710876,
                    "Y": 0.1397954225540161
                },
                {
                    "X": 0.37893009185791016,
                    "Y": 0.157984659075737
                },
                {
                    "X": 0.3107626438140869,
                    "Y": 0.15877485275268555
                }
            ]
        },
        "Id": 4,
        "Type": "LINE"
    },
    {
        "Confidence": 91.45885467529297,
        "DetectedText": "svobodny",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.02359846606850624,
                "Left": 0.30813807249069214,
                "Top": 0.15482188761234283,
                "Width": 0.13805082440376282
            },
            "Polygon": [
                {
                    "X": 0.30813807249069214,
                    "Y": 0.15482188761234283
                },
                {
                    "X": 0.44618889689445496,
                    "Y": 0.15547020733356476
                },
                {
                    "X": 0.4459920823574066,
                    "Y": 0.1790686696767807
                },
                {
                    "X": 0.3079412579536438,
                    "Y": 0.17842036485671997
                }
            ]
        },
        "Id": 5,
        "Type": "LINE"
    },
    {
        "Confidence": 90.51128387451172,
        "DetectedText": "BRANDYS DLABEM-STARA BOLESLAV",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.028479594737291336,
                "Left": 0.3722470998764038,
                "Top": 0.1823318898677826,
                "Width": 0.5227026343345642
            },
            "Polygon": [
                {
                    "X": 0.3722470998764038,
                    "Y": 0.1823318898677826
                },
                {
                    "X": 0.894949734210968,
                    "Y": 0.19210872054100037
                },
                {
                    "X": 0.894003689289093,
                    "Y": 0.2205883115530014
                },
                {
                    "X": 0.3713010847568512,
                    "Y": 0.21081148087978363
                }
            ]
        },
        "Id": 6,
        "Type": "LINE"
    },
    {
        "Confidence": 87.6821517944336,
        "DetectedText": "IDCZE2076 522864<<<< <<<<<<<<<",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.0347214974462986,
                "Left": 0.10398053377866745,
                "Top": 0.2993980050086975,
                "Width": 0.8222495913505554
            },
            "Polygon": [
                {
                    "X": 0.10398053377866745,
                    "Y": 0.2993980050086975
                },
                {
                    "X": 0.9262300729751587,
                    "Y": 0.3087175488471985
                },
                {
                    "X": 0.9255312085151672,
                    "Y": 0.3434390425682068
                },
                {
                    "X": 0.1032816469669342,
                    "Y": 0.3341195285320282
                }
            ]
        },
        "Id": 7,
        "Type": "LINE"
    },
    {
        "Confidence": 90.84927368164062,
        "DetectedText": "9111015M2 1127CZE<<<<<<<<<<<",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.03206630423665047,
                "Left": 0.09788335114717484,
                "Top": 0.33330783247947693,
                "Width": 0.7843201756477356
            },
            "Polygon": [
                {
                    "X": 0.09788335114717484,
                    "Y": 0.33330783247947693
                },
                {
                    "X": 0.8822035193443298,
                    "Y": 0.34203872084617615
                },
                {
                    "X": 0.8815695643424988,
                    "Y": 0.3741050362586975
                },
                {
                    "X": 0.09724943339824677,
                    "Y": 0.3653741478919983
                }
            ]
        },
        "Id": 8,
        "Type": "LINE"
    },
    {
        "Confidence": 87.63035583496094,
        "DetectedText": "UHLIR<<DAVID<<<<< <<<<<<<<<<<<<<<<<",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.030390268191695213,
                "Left": 0.0951579213142395,
                "Top": 0.36552563309669495,
                "Width": 0.8325461745262146
            },
            "Polygon": [
                {
                    "X": 0.0951579213142395,
                    "Y": 0.36552563309669495
                },
                {
                    "X": 0.9277040958404541,
                    "Y": 0.3741328716278076
                },
                {
                    "X": 0.9271461367607117,
                    "Y": 0.4045231342315674
                },
                {
                    "X": 0.09459995478391647,
                    "Y": 0.3959158957004547
                }
            ]
        },
        "Id": 9,
        "Type": "LINE"
    },
    {
        "Confidence": 47.33421325683594,
        "DetectedText": "le",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.2733284831047058,
                "Left": 0.07950349897146225,
                "Top": 0.43239834904670715,
                "Width": 0.7756853103637695
            },
            "Polygon": [
                {
                    "X": 0.07950349897146225,
                    "Y": 0.43239834904670715
                },
                {
                    "X": 0.85518878698349,
                    "Y": 0.45345017313957214
                },
                {
                    "X": 0.8420150876045227,
                    "Y": 0.7267786264419556
                },
                {
                    "X": 0.06632983684539795,
                    "Y": 0.7057268023490906
                }
            ]
        },
        "Id": 10,
        "Type": "LINE"
    },
    {
        "Confidence": 84.14978790283203,
        "DetectedText": "RANDYS",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.024056272581219673,
                "Left": 0.14690200984477997,
                "Top": 0.030701695010066032,
                "Width": 0.11357558518648148
            },
            "Polygon": [
                {
                    "X": 0.1473495066165924,
                    "Y": 0.030269315466284752
                },
                {
                    "X": 0.25905242562294006,
                    "Y": 0.031154373660683632
                },
                {
                    "X": 0.2587254047393799,
                    "Y": 0.05439533293247223
                },
                {
                    "X": 0.14702247083187103,
                    "Y": 0.05351027473807335
                }
            ]
        },
        "Id": 11,
        "ParentId": 0,
        "Type": "WORD"
    },
    {
        "Confidence": 86.33930969238281,
        "DetectedText": "YS NAD LABEM-STARA",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.02445146068930626,
                "Left": 0.23908360302448273,
                "Top": 0.031929198652505875,
                "Width": 0.25742200016975403
            },
            "Polygon": [
                {
                    "X": 0.23133604228496552,
                    "Y": 0.03104730322957039
                },
                {
                    "X": 0.4965154528617859,
                    "Y": 0.034059565514326096
                },
                {
                    "X": 0.49607327580451965,
                    "Y": 0.055978816002607346
                },
                {
                    "X": 0.23089386522769928,
                    "Y": 0.05296655371785164
                }
            ]
        },
        "Id": 12,
        "ParentId": 0,
        "Type": "WORD"
    },
    {
        "Confidence": 91.90792083740234,
        "DetectedText": "BOLESLAV,",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.030141688883304596,
                "Left": 0.49936097860336304,
                "Top": 0.03267008438706398,
                "Width": 0.13610242307186127
            },
            "Polygon": [
                {
                    "X": 0.4999687671661377,
                    "Y": 0.03254722058773041
                },
                {
                    "X": 0.6356526613235474,
                    "Y": 0.03473003953695297
                },
                {
                    "X": 0.6348550319671631,
                    "Y": 0.06264970451593399
                },
                {
                    "X": 0.49917110800743103,
                    "Y": 0.060466885566711426
                }
            ]
        },
        "Id": 13,
        "ParentId": 0,
        "Type": "WORD"
    },
    {
        "Confidence": 88.33692169189453,
        "DetectedText": "BRANDYS",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.03155850991606712,
                "Left": 0.6392371654510498,
                "Top": 0.03430258482694626,
                "Width": 0.12061168253421783
            },
            "Polygon": [
                {
                    "X": 0.6394703388214111,
                    "Y": 0.03430742397904396
                },
                {
                    "X": 0.759562611579895,
                    "Y": 0.0351719930768013
                },
                {
                    "X": 0.759167492389679,
                    "Y": 0.06607717275619507
                },
                {
                    "X": 0.6390752196311951,
                    "Y": 0.06521259993314743
                }
            ]
        },
        "Id": 14,
        "ParentId": 0,
        "Type": "WORD"
    },
    {
        "Confidence": 84.00450134277344,
        "DetectedText": "NAD",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.02516772784292698,
                "Left": 0.7651984691619873,
                "Top": 0.040923506021499634,
                "Width": 0.051470935344696045
            },
            "Polygon": [
                {
                    "X": 0.7662033438682556,
                    "Y": 0.04052096605300903
                },
                {
                    "X": 0.8153051137924194,
                    "Y": 0.04122861474752426
                },
                {
                    "X": 0.8146591782569885,
                    "Y": 0.06646545976400375
                },
                {
                    "X": 0.7655574679374695,
                    "Y": 0.06575781106948853
                }
            ]
        },
        "Id": 15,
        "ParentId": 0,
        "Type": "WORD"
    },
    {
        "Confidence": 85.04739379882812,
        "DetectedText": "LABEM",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.02773992158472538,
                "Left": 0.8225305080413818,
                "Top": 0.0417412668466568,
                "Width": 0.08259502798318863
            },
            "Polygon": [
                {
                    "X": 0.8228708505630493,
                    "Y": 0.04156522452831268
                },
                {
                    "X": 0.9051146507263184,
                    "Y": 0.04219406843185425
                },
                {
                    "X": 0.9047523736953735,
                    "Y": 0.06887778639793396
                },
                {
                    "X": 0.8225085735321045,
                    "Y": 0.0682489424943924
                }
            ]
        },
        "Id": 16,
        "ParentId": 0,
        "Type": "WORD"
    },
    {
        "Confidence": 91.75147247314453,
        "DetectedText": "VODOJEMU",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.02358095534145832,
                "Left": 0.15391269326210022,
                "Top": 0.05174114182591438,
                "Width": 0.16450579464435577
            },
            "Polygon": [
                {
                    "X": 0.1559157520532608,
                    "Y": 0.05174276977777481
                },
                {
                    "X": 0.3149292469024658,
                    "Y": 0.052924007177352905
                },
                {
                    "X": 0.31463807821273804,
                    "Y": 0.07499615103006363
                },
                {
                    "X": 0.15562456846237183,
                    "Y": 0.07381490617990494
                }
            ]
        },
        "Id": 17,
        "ParentId": 1,
        "Type": "WORD"
    },
    {
        "Confidence": 81.22058868408203,
        "DetectedText": ".2517",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.023110678419470787,
                "Left": 0.36401990056037903,
                "Top": 0.054330188781023026,
                "Width": 0.08885611593723297
            },
            "Polygon": [
                {
                    "X": 0.3601858615875244,
                    "Y": 0.053165316581726074
                },
                {
                    "X": 0.45600730180740356,
                    "Y": 0.0551125667989254
                },
                {
                    "X": 0.45518308877944946,
                    "Y": 0.07795031368732452
                },
                {
                    "X": 0.3593616783618927,
                    "Y": 0.0760030671954155
                }
            ]
        },
        "Id": 18,
        "ParentId": 1,
        "Type": "WORD"
    },
    {
        "Confidence": 87.34105682373047,
        "DetectedText": "HA-VYCHOD",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.024415437132120132,
                "Left": 0.2533850073814392,
                "Top": 0.07281670719385147,
                "Width": 0.1607346534729004
            },
            "Polygon": [
                {
                    "X": 0.25369346141815186,
                    "Y": 0.07273821532726288
                },
                {
                    "X": 0.4145830273628235,
                    "Y": 0.07479935884475708
                },
                {
                    "X": 0.4140821397304535,
                    "Y": 0.09681573510169983
                },
                {
                    "X": 0.25319257378578186,
                    "Y": 0.09475458413362503
                }
            ]
        },
        "Id": 19,
        "ParentId": 2,
        "Type": "WORD"
    },
    {
        "Confidence": 73.88701629638672,
        "DetectedText": "LL0ERSONAL",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.021115213632583618,
                "Left": 0.1818012297153473,
                "Top": 0.1029922366142273,
                "Width": 0.13649217784404755
            },
            "Polygon": [
                {
                    "X": 0.17710059881210327,
                    "Y": 0.10256942361593246
                },
                {
                    "X": 0.32114744186401367,
                    "Y": 0.103289894759655
                },
                {
                    "X": 0.3209607005119324,
                    "Y": 0.12431397289037704
                },
                {
                    "X": 0.17691385746002197,
                    "Y": 0.12359349429607391
                }
            ]
        },
        "Id": 20,
        "ParentId": 3,
        "Type": "WORD"
    },
    {
        "Confidence": 83.61105346679688,
        "DetectedText": "RODININY",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.018686238676309586,
                "Left": 0.31165140867233276,
                "Top": 0.14027045667171478,
                "Width": 0.06596632301807404
            },
            "Polygon": [
                {
                    "X": 0.3103881776332855,
                    "Y": 0.14058561623096466
                },
                {
                    "X": 0.37855562567710876,
                    "Y": 0.1397954225540161
                },
                {
                    "X": 0.37893009185791016,
                    "Y": 0.157984659075737
                },
                {
                    "X": 0.3107626438140869,
                    "Y": 0.15877485275268555
                }
            ]
        },
        "Id": 21,
        "ParentId": 4,
        "Type": "WORD"
    },
    {
        "Confidence": 91.45885467529297,
        "DetectedText": "svobodny",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.025670645758509636,
                "Left": 0.3081611096858978,
                "Top": 0.15444833040237427,
                "Width": 0.13906016945838928
            },
            "Polygon": [
                {
                    "X": 0.30813807249069214,
                    "Y": 0.15482188761234283
                },
                {
                    "X": 0.44618889689445496,
                    "Y": 0.15547020733356476
                },
                {
                    "X": 0.4459920823574066,
                    "Y": 0.1790686696767807
                },
                {
                    "X": 0.3079412579536438,
                    "Y": 0.17842036485671997
                }
            ]
        },
        "Id": 22,
        "ParentId": 5,
        "Type": "WORD"
    },
    {
        "Confidence": 93.2411117553711,
        "DetectedText": "BRANDYS",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.0265903752297163,
                "Left": 0.3720826506614685,
                "Top": 0.1840749830007553,
                "Width": 0.12541674077510834
            },
            "Polygon": [
                {
                    "X": 0.3721855878829956,
                    "Y": 0.18418341875076294
                },
                {
                    "X": 0.49709445238113403,
                    "Y": 0.18481042981147766
                },
                {
                    "X": 0.4968678653240204,
                    "Y": 0.21022875607013702
                },
                {
                    "X": 0.37195900082588196,
                    "Y": 0.2096017599105835
                }
            ]
        },
        "Id": 23,
        "ParentId": 6,
        "Type": "WORD"
    },
    {
        "Confidence": 89.02800750732422,
        "DetectedText": "DLABEM-STARA",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.027486301958560944,
                "Left": 0.5552752614021301,
                "Top": 0.1883346438407898,
                "Width": 0.2085956633090973
            },
            "Polygon": [
                {
                    "X": 0.5543316006660461,
                    "Y": 0.1878741979598999
                },
                {
                    "X": 0.7644383907318115,
                    "Y": 0.1906270682811737
                },
                {
                    "X": 0.763843834400177,
                    "Y": 0.21617795526981354
                },
                {
                    "X": 0.5537371039390564,
                    "Y": 0.21342508494853973
                }
            ]
        },
        "Id": 24,
        "ParentId": 6,
        "Type": "WORD"
    },
    {
        "Confidence": 89.26472473144531,
        "DetectedText": "BOLESLAV",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.030372358858585358,
                "Left": 0.7579211592674255,
                "Top": 0.18989957869052887,
                "Width": 0.13602888584136963
            },
            "Polygon": [
                {
                    "X": 0.7580813765525818,
                    "Y": 0.18963377177715302
                },
                {
                    "X": 0.8949183821678162,
                    "Y": 0.1921081393957138
                },
                {
                    "X": 0.8940065503120422,
                    "Y": 0.2205032855272293
                },
                {
                    "X": 0.7571695446968079,
                    "Y": 0.21802891790866852
                }
            ]
        },
        "Id": 25,
        "ParentId": 6,
        "Type": "WORD"
    },
    {
        "Confidence": 93.264404296875,
        "DetectedText": "IDCZE2076",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.031891096383333206,
                "Left": 0.10548370331525803,
                "Top": 0.3017808198928833,
                "Width": 0.23907741904258728
            },
            "Polygon": [
                {
                    "X": 0.103935606777668,
                    "Y": 0.30163002014160156
                },
                {
                    "X": 0.3423784673213959,
                    "Y": 0.3021000623703003
                },
                {
                    "X": 0.34226784110069275,
                    "Y": 0.3336928188800812
                },
                {
                    "X": 0.10382500290870667,
                    "Y": 0.33322277665138245
                }
            ]
        },
        "Id": 26,
        "ParentId": 7,
        "Type": "WORD"
    },
    {
        "Confidence": 85.77745056152344,
        "DetectedText": "522864<<<<",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.031343359500169754,
                "Left": 0.35246792435646057,
                "Top": 0.3074018955230713,
                "Width": 0.2594369053840637
            },
            "Polygon": [
                {
                    "X": 0.3563075065612793,
                    "Y": 0.3067769408226013
                },
                {
                    "X": 0.6081752181053162,
                    "Y": 0.3088724613189697
                },
                {
                    "X": 0.6077289581298828,
                    "Y": 0.33907783031463623
                },
                {
                    "X": 0.35586121678352356,
                    "Y": 0.3369823098182678
                }
            ]
        },
        "Id": 27,
        "ParentId": 7,
        "Type": "WORD"
    },
    {
        "Confidence": 84.00460052490234,
        "DetectedText": "<<<<<<<<<",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.03061136044561863,
                "Left": 0.6913890242576599,
                "Top": 0.310067743062973,
                "Width": 0.23419591784477234
            },
            "Polygon": [
                {
                    "X": 0.6955523490905762,
                    "Y": 0.30981966853141785
                },
                {
                    "X": 0.9258654713630676,
                    "Y": 0.3110463619232178
                },
                {
                    "X": 0.9255837202072144,
                    "Y": 0.3408299386501312
                },
                {
                    "X": 0.6952706575393677,
                    "Y": 0.3396032154560089
                }
            ]
        },
        "Id": 28,
        "ParentId": 7,
        "Type": "WORD"
    },
    {
        "Confidence": 92.55400848388672,
        "DetectedText": "9111015M2",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.030692555010318756,
                "Left": 0.09632746130228043,
                "Top": 0.33527871966362,
                "Width": 0.24926762282848358
            },
            "Polygon": [
                {
                    "X": 0.09784572571516037,
                    "Y": 0.33521100878715515
                },
                {
                    "X": 0.34030240774154663,
                    "Y": 0.33600640296936035
                },
                {
                    "X": 0.3401266634464264,
                    "Y": 0.36617422103881836
                },
                {
                    "X": 0.09766997396945953,
                    "Y": 0.36537882685661316
                }
            ]
        },
        "Id": 29,
        "ParentId": 8,
        "Type": "WORD"
    },
    {
        "Confidence": 89.14453887939453,
        "DetectedText": "1127CZE<<<<<<<<<<<",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.02969105914235115,
                "Left": 0.41496920585632324,
                "Top": 0.34106552600860596,
                "Width": 0.47174617648124695
            },
            "Polygon": [
                {
                    "X": 0.41772332787513733,
                    "Y": 0.34105849266052246
                },
                {
                    "X": 0.8820561766624451,
                    "Y": 0.3454318046569824
                },
                {
                    "X": 0.8816149830818176,
                    "Y": 0.3718099594116211
                },
                {
                    "X": 0.4172821044921875,
                    "Y": 0.36743664741516113
                }
            ]
        },
        "Id": 30,
        "ParentId": 8,
        "Type": "WORD"
    },
    {
        "Confidence": 88.70732879638672,
        "DetectedText": "UHLIR<<DAVID<<<<<",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.034057389944791794,
                "Left": 0.09348292648792267,
                "Top": 0.3672634959220886,
                "Width": 0.47757020592689514
            },
            "Polygon": [
                {
                    "X": 0.09515199810266495,
                    "Y": 0.3658479154109955
                },
                {
                    "X": 0.5652954578399658,
                    "Y": 0.37038612365722656
                },
                {
                    "X": 0.5647799968719482,
                    "Y": 0.4004545211791992
                },
                {
                    "X": 0.09463655203580856,
                    "Y": 0.39591628313064575
                }
            ]
        },
        "Id": 31,
        "ParentId": 9,
        "Type": "WORD"
    },
    {
        "Confidence": 47.33421325683594,
        "DetectedText": "le",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.2806611955165863,
                "Left": 0.06612777709960938,
                "Top": 0.443535178899765,
                "Width": 0.7952176928520203
            },
            "Polygon": [
                {
                    "X": 0.07950349897146225,
                    "Y": 0.43239834904670715
                },
                {
                    "X": 0.85518878698349,
                    "Y": 0.45345017313957214
                },
                {
                    "X": 0.8420150876045227,
                    "Y": 0.7267786264419556
                },
                {
                    "X": 0.06632983684539795,
                    "Y": 0.7057268023490906
                }
            ]
        },
        "Id": 33,
        "ParentId": 10,
        "Type": "WORD"
    },
    {
        "Confidence": 86.55337524414062,
        "DetectedText": "<<<<<<<<<<<<<<<<<",
        "Geometry": {
            "BoundingBox": {
                "Height": 0.027944525703787804,
                "Left": 0.46971505880355835,
                "Top": 0.37512290477752686,
                "Width": 0.4589333236217499
            },
            "Polygon": [
                {
                    "X": 0.47815635800361633,
                    "Y": 0.3739892542362213
                },
                {
                    "X": 0.927501916885376,
                    "Y": 0.3771524429321289
                },
                {
                    "X": 0.9271887540817261,
                    "Y": 0.40220028162002563
                },
                {
                    "X": 0.47784319519996643,
                    "Y": 0.39903709292411804
                }
            ]
        },
        "Id": 32,
        "ParentId": 9,
        "Type": "WORD"
    }
];

export class IdCardParser {
    constructor() {
        //console.log(IdCardParser.parseMRLines(response));
    }

    /**
     * Parse MRlines from detected text
     */
    public static parseMRLines(input: AWSTextDetection[]): any {
        // mrz line must have 30 characters
        const posibleMRlines = input.filter((item) => {
            return item.DetectedText.length === 30;
        });

        // sort by y from top
        posibleMRlines.sort((a, b) => {
            if (a.Geometry.BoundingBox.Top > b.Geometry.BoundingBox.Top) {
                return 1;
            } else if (a.Geometry.BoundingBox.Top < b.Geometry.BoundingBox.Top) {
                return -1;
            }
            return 0;
        });

        let result = null;
        for(let i = 0; i < posibleMRlines.length - 2; i++) {
            try {
                result = parseMrz(posibleMRlines.slice(i, i + 3).map((item) => {
                    return item.DetectedText;
                }));
            } catch(e) {}
        }

        return result;
    }
}